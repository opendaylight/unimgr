<div class="container" id="tenant-page">
	<h1>Tenant {{ curTenant }}</h1>
	<div class="menu">
		<ul id="EVCs-tab" class="nav nav-pills" role="tablist">
			<li ng-class="{ active: isTabSet('tenantData',1)}" ng-click="setTab('tenantData',1)" >
				<a id="evcs-configure-tab" > <i class="icon-tasks"></i> Services</a>
			</li>
			<li ng-class="{ active: isTabSet('tenantData',2)}" ng-click="setTab('tenantData',2)" >
				<a id="dashboard-tab" > <i class="icon-signal"></i> Dashboard</a>
			</li>
			<li id="refresh_btn" class="active refresh-btn" ng-click="updateEvcView()">
				<button class="btn add-row"> <i class="icon-refresh"></i> Refresh</button>
			</li>
		</ul>
	</div>
	<div id="EVCsContent" class="tab-content">
		<div ng-show="isTabSet('tenantData',1)">
			<div class="table-header">EVCs Table</div>
			<table class="footable table table-striped">
				<thead>
					<tr>
						<th>EVC ID</th>
						<th>UNIs</th>
						<th>SVC Type</th>
						<th>EVC Type</th>
						<th colspan="2" >Tenant</th>
					</tr>
				</thead>
				<tbody id="l2_table">
					<tr ng-repeat-start="item in evcs | orderBy : sortEvc">
						<td rowspan="{{ 1 + unisTables[item['svc-id']] }}">{{ item.evc['evc-id'] }}</td>
						<td >
							<button ng-show="!unisTables[item['svc-id']]" class="btn add-row btn-block" ng-click="unisTables[item['svc-id']] = true;">Show Unis</button>
							<button ng-show="unisTables[item['svc-id']]" class="btn add-row btn-block" ng-click="unisTables[item['svc-id']] = false;">Hide Unis</button>
						</td>
						<td >{{ item['svc-type'] }}</td>
						<td >{{ title(item.evc['evc-type']) }}</td>
						<td>{{ item['tenant-id'] }}</td>
						<td class="delete-tr"><button class="btn btn-md btn-danger" ng-click="deleteEvc(item['svc-id'])"> <i class="icon-trash"></i> </button></td>
					</tr>
					<tr ng-repeat-end ng-show="unisTables[item['svc-id']]">
						<td colspan="5">
							<table class="footable table table-striped inner-table">
								<thead>
									<tr>
										<th>Device</th>
										<th>UNI</th>
										<th ng-if="item.isTree" >Role</th>
										<th>Vlans <span style="font-size:small;color:inherit;"> (click to edit)</span></th>
										<th class="delete-tr"><button class="btn btn-md btn-info" ng-click="linkEvcUniDialog.show($event, {'evc':item,'unis':unis,'ces':ces})"> <i class="icon-plus"></i> </button></th>
									</tr>
								</thead>
								<tbody id="l2_table">
									<tr ng-repeat-start="(ce, unis) in item.device2unis | orderBy : ce ">
										<td rowspan="{{unis.length}}">{{ cesDisplayNames[ce] }}</td>
										<td ng-repeat-start="uni in unis | orderBy: sortUni | limitTo :1">{{ uni['uni-id'] }}</td>
										<td ng-if="item.isTree">{{ uni['role'] }}</td>
										<td class="clickable" ng-click="!item.evc['preserve-ce-vlan-id'] ? editVlanDialog.show($event, {svcid:item['svc-id'], uniid:uni['uni-id'], vlans:uni.vlans}) : 0">
										{{ uni.vlans.join(', ') }} {{item.evc['preserve-ce-vlan-id'] ? '(Preserved)' : ''}}
										</td>
										<td ng-repeat-end class="delete-tr"><button class="btn btn-md btn-danger" ng-click="deleteEvcUni(item['svc-id'], uni['uni-id'])"> <i class="icon-trash"></i> </button></td>
									</tr>
									<tr ng-repeat-end ng-repeat="uni in unis | orderBy: sortUni | limitTo :(unis.length-1) :1">
										<td>{{ uni['uni-id'] }}</td>
										<td ng-if="item.isTree">{{ uni['role'] }}</td>
										<td class="clickable" ng-click="!item.evc['preserve-ce-vlan-id'] ? editVlanDialog.show($event, {svcid:item['svc-id'], uniid:uni['uni-id'], vlans:uni.vlans}) : 0">
										{{ uni.vlans.join(', ') }} {{item.evc['preserve-ce-vlan-id'] ? '(Preserved)' : ''}}
										</td>
										<td class="delete-tr"><button class="btn btn-md btn-danger" ng-click="deleteEvcUni(item['svc-id'], uni['uni-id'])"> <i class="icon-trash"></i> </button></td>
									</tr>
								</tbody>
							</table>
						</td>
					</tr>
				</tbody>
			</table>
			<div><a class="btn btn-info add-row" ng-click="evcDialog.show($event,{'svcTypes':svcTypes})" >Create EVC</a></div>
		</div>
		<div ng-show="isTabSet('tenantData',2)">
			<h3>To Be Implemented...</h3>
		</div>
	</div>
	<div class="clear">
		<button class="btn btn-default pull-right" onclick="window.location='#/cpeui/admin/tenants'" > Back </button>
	</div>
</div>
