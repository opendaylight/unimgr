<div class="container">
	<h1>Admin Page</h1>
	<div class="menu">
		<ul id="MainTabs" class="nav nav-pills" role="tablist">
			<li ng-class="{ active: isTabSet('admin',1)}"
				ng-click="setTab('admin',1)"><a id="evcs-view-tab" href="#/cpeui/admin/tenants">
				 <i class="icon-desktop"></i> Tenants</a></li>
			<li ng-class="{ active: isTabSet('admin',2)}"
				ng-click="setTab('admin',2)"><a id="evcs-configure-tab" href="#/cpeui/admin/cpes">
					<i class="icon-tasks"></i> CPEs (Devices)</a></li>
			<li ng-class="{ active: isTabSet('admin',3)}"
				ng-click="setTab('admin',3);updateView()"><a id="dashboard-tab"  href="#/cpeui/admin/unis">
				 <i class="icon-exchange"></i> UNIs</a>
			 </li>
			 <li ng-class="{ active: isTabSet('admin',4)}"
				ng-click="setTab('admin',4);updateNetworksView()"><a id="dashboard-tab"  href="#/cpeui/admin/networks">
			 	<i class="icon-signal"></i> Networks</a>
			 </li>
			<li id="refresh_btn" class="active refresh-btn"
				ng-click="updateView()"><button class="btn add-row"> <i class="icon-refresh"></i> Refresh</button>
				</li>
		</ul>
	</div>
	<div ng-show="isTabSet('admin',1)">
		<div ui-view="tenants" />
	</div>
	<div ng-show="isTabSet('admin',2)">
		<div class="table-header">Devices</div>
		<table class="footable table table-striped">
			<thead>
				<tr>
					<th>CPE ID</th>
					<th>CPE name</th>
					<th colspan="2">Tenant</th>
				</tr>
			</thead>
			<tbody id="ces_table">
				<tr ng-repeat="item in ces | orderBy: '[\'dev-id\']'">					
					<td class="minimal-width">{{ item['dev-id'] }}</td>
					<td>{{ item['device-name'] }}
						<button ng-if="!(item['device-name'] || item._naming)" class="btn right" ng-click="addCEName(item)"><i class="icon-edit"></i> Add Name</button>
						<i class="clear"></i>
						<md-input-container class="md-block no-error-spacer left" ng-show="item._naming" style="width:79%">
							<label>Device Name</label>
							<input id="INPUT_{{item['dev-id']}}" type="text" ng-model="item._new_name"/>
						</md-input-container>							
						<button id="OK_{{item['dev-id']}}" ng-show="item._naming" class="btn right" style="max-width:20%" ng-click="renameCE(item)"><i class="icon-ok"></i> OK</button>							
					</td>
					<td>
						<md-input-container class="md-block">
					        <label>Multiple</label>
					        <md-select ng-change="assignCpeToTenant(item['dev-id'])" ng-model="selectedTenant[item['dev-id']]" name="selectedTenant">
					        	<md-option value="" default>&lt;None&gt;</md-option>
					       		<md-option ng-repeat="tenant in tenantArray" value="{{ tenant.name }}">{{ tenant.name }}</md-option>
					        </md-select>
		      			</md-input-container>
					</td>
					<td class="delete-tr"><button class="btn btn-md btn-danger" ng-click="deleteCe(curTenant,item['dev-id'])"> <i class="icon-trash"></i> </button></td>
				</tr>
			</tbody>
		</table>
		<div>
			<a class="btn add-row" ng-click="cesDialog.show($event)">Create CPE</a>
		</div>
	</div>
	<div ng-show="isTabSet('admin',3)">
		<div class="table-header">UNIs</div>
		<table class="footable table table-striped">
			<thead>
				<tr>
					<th>Device</th>
					<th>ID</th>
					<th colspan="2">Tenant</th>
				</tr>
			</thead>
			<tbody id="ces_table">
				<tr ng-repeat="item in unis | orderBy: '[\'uni-id\']'">
					<td ng-init="device = ces.filterByField('dev-id',item.device)[0]">{{ device["device-name"] ? device["device-name"] : item.device}}</td>
					<td>{{ item.prettyID }}</td>
					<td ng-if="item['tenant-id'] != undefined" >
						{{ item['tenant-id'] }} <button class="btn add-row right" ng-click="linkUniDialog.show($event, {'uni':item['uni-id'], tenants:tenantArray})">Edit</button>
					</td>
					<td ng-if="item['tenant-id'] == undefined" >
						<button class="btn add-row btn-middle" ng-click="linkUniDialog.show($event, {'uni':item['uni-id'], tenants:tenantArray})"><i class="icon-link"></i> Link Tenant</button>
					</td>
					<td class="delete-tr"><button class="btn btn-md btn-danger" ng-click="deleteUni(item['uni-id'])"> <i class="icon-trash"></i> </button></td>
				</tr>
			</tbody>
		</table>
	</div>
	<div ng-show="isTabSet('admin',4)">
		<div class="table-header">Networks</div>
		<table class="footable table table-striped">
			<thead>
				<tr>
					<th>Network ID</th>
					<th>Network name</th>
					<th>Tenant</th>
				</tr>
			</thead>
			<tbody id="ces_table">
				<tr ng-repeat="svc in services ">					
					<td class="minimal-width">{{ svc['svc-id'] }}</td>
					<td class="minimal-width">{{ networkNames[svc['svc-id']] }}</td>					
					<td ng-if="svc['tenant-id']" class="minimal-width">{{ svc['tenant-id'] }}</td>
					<td ng-if="!(svc['tenant-id'])" class="minimal-width">
					<md-input-container class="md-block">
							<label>Assign Tenant</label>
					        <md-select ng-change="assignNetworkToTenant(svc)" ng-model="selectedTenant[svc['svc-id']]" name="selectedTenant">
					       		<md-option ng-repeat="tenant in tenantArray" value="{{ tenant.name }}">{{ tenant.name }}</md-option>
					        </md-select>
		      			</md-input-container>
					</td>
				</tr>
			</tbody>
		</table>		
	</div>
</div>
